#!/usr/bin/env bash

if [ $BASH_SOURCE == $0 ]; then
   echo "Don't call directly (./find-parent-dir), use source instead (. find-parent-dir)"

   exit 1
fi

if [ $# != 1 ]; then
   echo "Usage: . find-parent-dir <parent-dir-name>"
   return 1
fi

start_dir=$(pwd)
cur_full_path=$start_dir
wanted_dir=$1

while [ "$cur_full_path" != "/" ]
do
   cur_dir=$(basename "$cur_full_path")

   if [ "${cur_dir}" == "${wanted_dir}" ]; then
      cd "$cur_full_path"
      return 0
   else
      cd ..
   fi

   cur_full_path=$(pwd)
done

if [ "$cur_full_path" != "$wanted_dir" ]; then
   echo "Parent directory '$wanted_dir' not found."
   cd "$start_dir"
   return 1
fi

return 0

